[TOC]

# kettle 解析 17M json





前提：

用户提供一批17M左右的json文件，需要解析入库，那么在oracle12c的高版本中，已经有了json的约束检查，只要符合json约束检查，就可以通过oracle直接来解析数据入库。但是发现问题是一个17m的json存入到oracle中就会报错，具体愿意可能与java有关，但是现实中我可能要将一个文件拆成两个文件，这样手工就非常麻烦，如何操作呢？

1、在kettle文本文件中设置三个字段，分别长度为0,9000000,9000000,1000,9001000,999999999这三个字段划分下

2、将1000个字符中查找出关键字"}",获取第一个后并将前面数据追加到第一个字段中，把后面的数据追加到后面的大字段中

3、重新使用kettle生成两个文件并同步到数据库中

将大文件分成两个小的文件，有利于我们直接使用oracle的操作来进行，但是两个小的文件也是clob大字段，大字段上不好操作，那么就在中间的1000字符中查找关键字，使用varchar的常用用法就可以对文件进行操作。